# 5.4 控制器的功能和工作原理

#### 1.硬布线控制器

* 跟上一节的操作形式比较像，多了比如$1 \to R \quad OP(IR) \to CU$命令存储器读,操作码译码
* 分为同步控制(一个时钟)，异步控制，联合控制

#### 2.微程序控制器

* 一条机器指令是一个微程序，有很多微操作构成，微命令是微操作的控制信号，微命令由很多的微指令组成
* 机器指令的操作码指向微程序头，每条微指令由操作序列和下条地址组成
* 控制存储器(ROM)，存储微程序命令，在cpu内部
* 微程序计数器用于实现微指令执行顺序
* 微地址寄存器CMAR，微指令寄存器CMDR，控制存储器，共同构成了类似于指令系统的存储三叉戟

> 微程序的操作相比硬布线会多 $Ad(CMDR) \to CMAR \quad OP(IR) \to CMAR; Ad(CMDR) \to CMAR$
>
> 分别在取指周期和执行周期多出来的

#### 3.微指令的编码方式

#### ,

* 分为直接编码和字段直接编码

> 字段直接编码是每种字段+1，然后二进制压缩

#### 3.微指令格式

* 水平型微指令，编成的微程序短，微指令长
* 垂直型微指令，微指令短，编成的微程序长，代表一种基本操作

#### 4.两者联系

* 微程序需要访问控制存储器，所以速度慢，易扩充修改
* cpu周期等于机器周期
* 控制器主要由指令寄存器，程序计数器，操作控制器组成
* 微操作控制信号的形成主要有 译码信号和时钟
* 一条微指令放一个存控单元