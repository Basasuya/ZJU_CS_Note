# 3.6 高速缓冲存储器(Cache)

* 遵从了程序的时间，空间局部性
* 内存地址又称作内存单元，一般后面都有字节作为单位

#### 1.Cache的基本工作原理

* 三种和主存的映射方式，直接映射，全映射，组相连

> 直接映射，每个内存块只有一个对应的cache号
>
> 全映射完全没有限制，组相连则是在一个组内部是没有限制的

* 内存地址的划分

> 内存标记位数(剩余的位数)，Cache字块位数(实际Cache行数,因为牵涉到组相连让多行并一行)，字块内位数(cache的字节个数)
>
> 后面两个合起来称作转入Cache的地址

* Cache的大小

> 除了每行的数据，还有标记位，有效位
>
> 除此之外，脏位，替换控制位(LRU下4组需要2位，其他依次类推)，是有有可能有的





***

* CPU与cache交换的是字，cache与内存交换的是块



# 3.7 虚拟存储器

* 上节说的cache-主存的局部性应用，这节是主存-辅存的局部性应用
* 可以说和上一节的内容是cpu查找存储中的向后关系

#### 1.页，段，段页

* 内存只有一个页表，在页表当中会有很多的页面，也称作页，就像一本书
* 段表和页表不同，是按照逻辑来划分的，长度可变化，便于修改
* 段页式则是先段后页，最后是用页进行查找



***

* 页面太大和太小都会使速度减慢
* 存取周期=存取时间+恢复时间
* 存储周期>存取时间
* 有时候指令cache和数据cache是分开的