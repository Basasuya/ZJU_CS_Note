# 7.4I/O方式

介绍了三种I/O控制方式的细节

#### 1.程序查询方式

* 程序查询方式是CPU与I/O相互串行，设置了数据缓冲寄存器，和设备状态寄存器

#### 2.程序中断技术

* 每个指令结束的时候都会进行搜索中断


* 实现了CPU与I/O并行的技术，但是并没有完全解放CPU

> 关中断，保存断点，中断服务程序寻址(硬件完成，中断隐指令)。
>
> 保存现场和屏蔽字，(开中断，执行中断服务程序，关中断) == (中断事件处理)，恢复现场和屏蔽字，开中断 

* 多种中断和中断屏蔽技术 p274 重叠处理中断的现象称为中断嵌套
* 中断技术的最后一步一般都是中断返回指令
* 内中断不可屏蔽。而外中断可以屏蔽
* 硬件故障，访管，外部，程序性，重新启动，指令优先级

#### 3.DMA方式

* 做到了程序和传送并行工作
* 结束的时候也需要和中断一样保护现场
* 传送过程分为 预处理，数据传送，后处理，

#### 4.两者区别

* 中断请求只能发生在每条指令结束之后，而DMA则可以在任何机器周期之后
* DMA请求的是总线控制权
* DMA方式无法处理异常事件，而中断方式可以的
* DMA不需要保护现场，和恢复现场
* DMA传送过程中由外部设备发出请求，之后DMA控制器控制总线控制权

#### 5.中断判优

* 总线仲裁方式 牵涉到p246的方式
* 另一种是中断判优
* 访管 >程序性 > 重新启动


***

* 中断向量地址是 中断服务例程的入口地址的地址
* 主存故障是一种机器出现的故障
* 自陷是一种主动的异常，人为设定的特殊情况
* PC.PSW是两个关键的硬件条件
* 中断屏蔽决定了执行次序，执行和响应不一样
* 鼠标键盘不能用于DMA