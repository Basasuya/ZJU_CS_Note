# 3.2 虚拟内存管理

* 这里面的操作和 覆盖交换 是不一样的概念
* 你可以理解虚拟内存管理是对于原本的段页管理进行了升级

#### 1.虚拟内存的概念

* 传统的存储的特点是一次性和驻留性
* 而虚拟内存应用了局部性原理，时间局部性，空间局部性
* 虚拟内存具有 多次性，对换性，虚拟性

#### 2.请求分页管理系统

* 页表机制比普通的页表机制相比，有页号，物理块号，状态号，访问次数，修改位，外存地址
* 相比普通的页表有缺页中断机制
* 在快表找不到的时候，在内存中的页表中寻找，寻找完之后就会在快表中更新

#### 3.页表置换算法

* 最佳置换(OPT) 这是理想的情况，寻找最长时间不会再被访问到的，在实际当中不会出现
* 先进先出(FIFO),最近最久未使用(LRU),时钟置换算法(CLOCK/NRU)

> 时钟算法有一个访问位，一开始置为1，然后指针进行转圈，如果是一个已经存在的，就直接更新访问位为1，指针放在后面

* 改进型CLOCK，有访问位和修改位，优先找 (0,0)，其次找(0,1)转圈的时候照样更新访问位

#### 4.页面分配策略

* 驻留集(页帧)大小，固定分配局部置换，可变全局置换，可变局部分配

> 可变全局分配只有增加，没有减少，存在一个空闲物理块队列
>
> 而局部分配一个进程内部置换，不能增加的

* 调入页面的时机，预调入，请求调页
* 从何处调入，在外存中有，文件区和交换区，所以交换区就是专门与内存进行交换

#### 5.其他概念

* 抖动：才调走的页面又要回来
* 工作集，是过去窗口大小里面访问的页数，可以用于评估页表的大小

#### 6.地址翻译

* 详细见p181，一般页大小大于cache行大小





***

* 磁盘利用率过高，需要提高内存，或者减少程序数
* 抖动的有效动作是撤销部分进程
* 固定分配，全局置换是不存在的